# 🤖 人事AI运营系统

一个基于AI的智能人事运营系统，集成**员工福利政策智能问答**和**简历智能筛选**两大核心功能。

## ✨ 核心功能

### 🎁 员工福利政策智能问答
- 📤 **批量上传政策文档**：支持PDF和TXT格式
- 💬 **自然语言查询**：员工用自然语言提问，AI基于所有政策文档智能回答
- 🎯 **快捷查询**：预设常见问题（请假、年终奖、五险一金等）
- 📋 **关键要点提取**：自动提炼政策核心要点
- 📖 **原文引用**：显示政策原文出处

### 🔍 简历智能筛选
- 📁 **批量上传简历**：支持PDF和TXT格式批量上传
- 🤖 **AI深度分析**：自动提取姓名、联系方式、学历、工作经历、技能等
- 💡 **自然语言筛选**：用自然语言描述需求，AI智能筛选符合条件的候选人
- 📊 **详细分析报告**：显示符合原因、候选人亮点、匹配度评分
- 📥 **一键下载简历**：直接下载符合条件的候选人简历

## 🎨 界面预览

### 双Tab设计
- **员工福利政策** 🎁 - 左侧上传政策文档，右侧智能问答
- **简历智能筛选** 🔍 - 左侧上传简历，右侧自然语言查询

## 🚀 快速开始

### 1. 环境要求
- Python 3.7+
- pip

### 2. 安装依赖
```bash
pip install flask python-dotenv openai PyPDF2 python-docx
```

或者使用requirements.txt：
```bash
pip install -r requirements.txt
```

### 3. 配置API密钥

**⚠️ 重要：配置大模型API**

复制 `.env.example` 为 `.env` 并填入您的配置：

```bash
cp .env.example .env
```

编辑 `.env` 文件：
```bash
# 从 https://openrouter.ai 获取API密钥
OPENAI_API_KEY=your_api_key_here

# API基础URL
OPENAI_BASE_URL=https://openrouter.ai/api/v1

# 使用的模型（推荐DeepSeek，性价比高）
OPENAI_MODEL=deepseek/deepseek-chat
```

> 💡 **提示**：没有API密钥？访问 [OpenRouter.ai](https://openrouter.ai) 注册并获取免费额度

### 4. 运行系统
```bash
python app.py
```

### 5. 访问系统
打开浏览器访问：**http://localhost:5001**

## 📖 使用说明

### 员工福利政策查询

#### 步骤1：上传政策文档
1. 点击"员工福利政策"标签页
2. 点击上传区域或拖拽PDF/TXT文档
3. 系统自动解析并添加到政策库

#### 步骤2：智能问答
1. 选择快捷查询按钮，或输入自定义问题
2. 例如："请假政策是什么？"、"年终奖如何计算？"
3. AI会基于所有上传的政策文档给出详细回答

#### 步骤3：查看结果
- 💬 **详细回答**：AI基于政策文档的完整解答
- ✨ **关键要点**：政策核心要点提炼
- 📖 **原文引用**：相关政策原文摘录
- 📄 **相关文档**：涉及的政策文档列表

### 简历智能筛选

#### 步骤1：批量上传简历
1. 点击"简历智能筛选"标签页
2. 上传多份候选人简历（PDF或TXT格式）
3. 系统静默处理，自动提取简历信息

#### 步骤2：自然语言查询
1. 使用自然语言描述需求
2. 例如："找本科以上学历的Python工程师"、"找有电商项目经验的候选人"
3. 点击"开始筛选"

#### 步骤3：查看筛选结果
- 👤 **候选人信息**：姓名、学历、工作年限、技能
- 📝 **符合原因**：为什么该候选人符合要求
- ✨ **候选人亮点**：关键优势和经验
- 📥 **下载简历**：一键下载完整简历

## 🛠 技术架构

### 后端
- **Flask**: 轻量级Web框架
- **OpenAI API**: 通过OpenRouter接入DeepSeek等大模型
- **PyPDF2**: PDF文本提取
- **python-docx**: Word文档解析
- **SQLite**: 轻量级数据库

### 前端
- **原生HTML/CSS/JavaScript**: 无复杂框架依赖
- **响应式设计**: 适配各种屏幕尺寸
- **现代UI**: 渐变色、卡片式布局、流畅动画

### AI能力
- **完整文本分析**：发送完整简历文本给大模型（每份最多3000字符）
- **自然语言理解**：理解用户的查询意图
- **智能匹配**：基于语义理解进行候选人匹配
- **结构化输出**：返回JSON格式的结构化结果

## 📁 项目结构

```
招聘系统/
├── app.py                      # Flask主应用
├── resume_analyzer.py          # 简历解析模块
├── resume_screener.py          # 简历筛选模块
├── ai_resume_analyzer.py       # AI增强分析模块
├── batch_screener.py           # 批量简历筛选模块
├── benefit_screener.py         # 员工福利政策查询模块
├── document_chat.py            # 文档对话模块
├── templates/
│   ├── home.html              # 主页（双Tab界面）
│   ├── document_chat.html     # 文档对话页面
│   └── index.html             # 旧版主页
├── uploads/                    # 上传文件存储目录
├── .env                        # 环境变量配置（不提交到Git）
├── .env.example               # 环境变量配置示例
├── .gitignore                 # Git忽略规则
└── README.md                  # 项目说明文档
```

## 🔐 安全说明

### 敏感信息保护
- ✅ `.env` 文件已加入 `.gitignore`，不会被提交到Git
- ✅ API密钥等敏感信息仅保存在本地
- ✅ 提供 `.env.example` 作为配置模板

### 数据安全
- ✅ 上传的文档仅保存在本地 `uploads/` 目录
- ✅ 简历和政策文档不会上传到第三方（仅发送文本给AI模型）
- ✅ 数据库文件 `resumes.db` 不会被提交到Git

## 📋 设计原则

系统遵循以下软件设计原则：

- **KISS原则** (Keep It Simple, Stupid): 简单易用，避免过度设计
- **DRY原则** (Don't Repeat Yourself): 代码复用，避免重复
- **SOLID原则**: 模块化设计，职责分离
- **YAGNI原则** (You Aren't Gonna Need It): 只实现必要功能

## 🔄 工作流程

### 员工福利政策查询流程
```
1. 上传政策文档（PDF/TXT）
   ↓
2. 系统提取文档文本内容
   ↓
3. 存储到政策库（内存）
   ↓
4. 用户提问
   ↓
5. 发送所有政策文档+问题给AI
   ↓
6. AI分析并返回答案
   ↓
7. 显示答案、要点、原文引用
```

### 简历筛选流程
```
1. 批量上传简历（PDF/TXT）
   ↓
2. 提取简历文本内容
   ↓
3. 存储到简历池（内存）
   ↓
4. 用户输入查询条件
   ↓
5. 发送所有简历全文+查询条件给AI
   ↓
6. AI分析并返回符合条件的候选人
   ↓
7. 显示候选人详情和下载按钮
```

## ⚙️ 配置说明

### 支持的文件格式
- ✅ PDF (.pdf)
- ✅ TXT (.txt)

### API配置
- **推荐模型**: `deepseek/deepseek-chat` (性价比高)
- **可选模型**: 
  - `anthropic/claude-3.5-sonnet` (效果好但贵)
  - `openai/gpt-4` (通用性强)
  - `google/gemini-pro` (免费额度大)

### 性能参数
- 最大文件大小: 16MB
- 每份文档最大字符数: 5000字符（政策）/ 3000字符（简历）
- 端口: 5001

## 🚧 已知限制

1. **文件格式限制**: 目前仅支持PDF和TXT格式
2. **文本提取**: PDF图片扫描件无法识别（需要OCR）
3. **内存存储**: 文档池存储在内存中，重启后需要重新上传
4. **单次查询限制**: AI模型有token限制，建议一次不超过20份文档

## 🔧 故障排除

### 问题1: 端口被占用
```bash
# 修改 app.py 中的端口号
app.run(debug=True, host='0.0.0.0', port=5002)  # 改为其他端口
```

### 问题2: API调用失败
- 检查 `.env` 文件是否正确配置
- 确认API密钥是否有效
- 检查网络连接

### 问题3: 中文文件名乱码
- 系统已处理中文文件名问题
- 如遇问题，请查看 `中文文件名修复说明.md`

### 问题4: PDF解析失败
- 确保PDF不是扫描件
- 尝试转换为TXT格式上传

## 📚 更多文档

- [快速开始指南](./快速开始.md)
- [常见问题解决](./常见问题解决.md)
- [文档对话功能说明](./文档对话功能说明.md)
- [Tab化界面说明](./Tab化界面说明.md)
- [中文文件名修复说明](./中文文件名修复说明.md)
- [问题修复记录](./问题修复记录.md)

## 📄 开源协议

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📧 联系方式

如有问题或建议，欢迎通过GitHub Issues反馈。

---

**⭐ 如果这个项目对您有帮助，欢迎Star支持！**
